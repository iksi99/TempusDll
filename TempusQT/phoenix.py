# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'phoenix.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from pyqtgraph import PlotWidget
from ctypes import *
from multiprocessing import Process

import numpy as np


class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1121, 707)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.layoutWidget = QtWidgets.QWidget(self.centralwidget)
        self.layoutWidget.setGeometry(QtCore.QRect(1010, 340, 87, 311))
        self.layoutWidget.setObjectName("layoutWidget")
        self.verticalLayout_3 = QtWidgets.QVBoxLayout(self.layoutWidget)
        self.verticalLayout_3.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout_3.setObjectName("verticalLayout_3")
        self.Scope2_Channel0 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel0.setObjectName("Scope2_Channel0")
        self.verticalLayout_3.addWidget(self.Scope2_Channel0)
        self.Scope2_Channel1 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel1.setObjectName("Scope2_Channel1")
        self.verticalLayout_3.addWidget(self.Scope2_Channel1)
        self.Scope2_Channel2 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel2.setObjectName("Scope2_Channel2")
        self.verticalLayout_3.addWidget(self.Scope2_Channel2)
        self.Scope2_Channel3 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel3.setObjectName("Scope2_Channel3")
        self.verticalLayout_3.addWidget(self.Scope2_Channel3)
        self.Scope2_Channel4 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel4.setObjectName("Scope2_Channel4")
        self.verticalLayout_3.addWidget(self.Scope2_Channel4)
        self.Scope2_Channel5 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel5.setObjectName("Scope2_Channel5")
        self.verticalLayout_3.addWidget(self.Scope2_Channel5)
        self.Scope2_Channel6 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel6.setObjectName("Scope2_Channel6")
        self.verticalLayout_3.addWidget(self.Scope2_Channel6)
        self.Scope2_Channel7 = QtWidgets.QCheckBox(self.layoutWidget)
        self.Scope2_Channel7.setObjectName("Scope2_Channel7")
        self.verticalLayout_3.addWidget(self.Scope2_Channel7)
        self.scope2SelectAll = QtWidgets.QPushButton(self.layoutWidget)
        self.scope2SelectAll.setObjectName("scope2SelectAll")
        self.verticalLayout_3.addWidget(self.scope2SelectAll)
        self.scope2DeselectAll = QtWidgets.QPushButton(self.layoutWidget)
        self.scope2DeselectAll.setObjectName("scope2DeselectAll")
        self.verticalLayout_3.addWidget(self.scope2DeselectAll)
        self.layoutWidget1 = QtWidgets.QWidget(self.centralwidget)
        self.layoutWidget1.setGeometry(QtCore.QRect(1010, 10, 87, 311))
        self.layoutWidget1.setObjectName("layoutWidget1")
        self.verticalLayout_2 = QtWidgets.QVBoxLayout(self.layoutWidget1)
        self.verticalLayout_2.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout_2.setObjectName("verticalLayout_2")
        self.Scope1_Channel0 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel0.setObjectName("Scope1_Channel0")
        self.verticalLayout_2.addWidget(self.Scope1_Channel0)
        self.Scope1_Channel1 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel1.setObjectName("Scope1_Channel1")
        self.verticalLayout_2.addWidget(self.Scope1_Channel1)
        self.Scope1_Channel2 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel2.setObjectName("Scope1_Channel2")
        self.verticalLayout_2.addWidget(self.Scope1_Channel2)
        self.Scope1_Channel3 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel3.setObjectName("Scope1_Channel3")
        self.verticalLayout_2.addWidget(self.Scope1_Channel3)
        self.Scope1_Channel4 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel4.setObjectName("Scope1_Channel4")
        self.verticalLayout_2.addWidget(self.Scope1_Channel4)
        self.Scope1_Channel5 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel5.setObjectName("Scope1_Channel5")
        self.verticalLayout_2.addWidget(self.Scope1_Channel5)
        self.Scope1_Channel6 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel6.setObjectName("Scope1_Channel6")
        self.verticalLayout_2.addWidget(self.Scope1_Channel6)
        self.Scope1_Channel7 = QtWidgets.QCheckBox(self.layoutWidget1)
        self.Scope1_Channel7.setObjectName("Scope1_Channel7")
        self.verticalLayout_2.addWidget(self.Scope1_Channel7)
        self.scope1SelectAll = QtWidgets.QPushButton(self.layoutWidget1)
        self.scope1SelectAll.setObjectName("scope1SelectAll")
        self.verticalLayout_2.addWidget(self.scope1SelectAll)
        self.scope1DeselectAll = QtWidgets.QPushButton(self.layoutWidget1)
        self.scope1DeselectAll.setObjectName("scope1DeselectAll")
        self.verticalLayout_2.addWidget(self.scope1DeselectAll)
        self.layoutWidget2 = QtWidgets.QWidget(self.centralwidget)
        self.layoutWidget2.setGeometry(QtCore.QRect(9, 10, 181, 641))
        self.layoutWidget2.setObjectName("layoutWidget2")
        self.verticalLayout = QtWidgets.QVBoxLayout(self.layoutWidget2)
        self.verticalLayout.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout.setObjectName("verticalLayout")
        self.groupBox_USB_Connection = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_USB_Connection.setObjectName("groupBox_USB_Connection")
        self.gridLayout = QtWidgets.QGridLayout(self.groupBox_USB_Connection)
        self.gridLayout.setObjectName("gridLayout")
        self.usbConnect = QtWidgets.QPushButton(self.groupBox_USB_Connection)
        self.usbConnect.setObjectName("usbConnect")
        self.gridLayout.addWidget(self.usbConnect, 0, 0, 1, 1)
        self.usbDisconnect = QtWidgets.QPushButton(self.groupBox_USB_Connection)
        self.usbDisconnect.setObjectName("usbDisconnect")
        self.gridLayout.addWidget(self.usbDisconnect, 0, 1, 1, 1)
        self.verticalLayout.addWidget(self.groupBox_USB_Connection)
        self.groupBox_Drive = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_Drive.setObjectName("groupBox_Drive")
        self.gridLayout_2 = QtWidgets.QGridLayout(self.groupBox_Drive)
        self.gridLayout_2.setObjectName("gridLayout_2")
        self.driveTurnOn = QtWidgets.QPushButton(self.groupBox_Drive)
        self.driveTurnOn.setObjectName("driveTurnOn")
        self.gridLayout_2.addWidget(self.driveTurnOn, 0, 0, 1, 1)
        self.driveCheck = QtWidgets.QPushButton(self.groupBox_Drive)
        self.driveCheck.setObjectName("driveCheck")
        self.gridLayout_2.addWidget(self.driveCheck, 0, 1, 1, 1)
        self.driveTurnOff = QtWidgets.QPushButton(self.groupBox_Drive)
        self.driveTurnOff.setObjectName("driveTurnOff")
        self.gridLayout_2.addWidget(self.driveTurnOff, 1, 0, 1, 1)
        self.driveReset = QtWidgets.QPushButton(self.groupBox_Drive)
        self.driveReset.setObjectName("driveReset")
        self.gridLayout_2.addWidget(self.driveReset, 1, 1, 1, 1)
        self.verticalLayout.addWidget(self.groupBox_Drive)
        self.groupBox_Parameters = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_Parameters.setObjectName("groupBox_Parameters")
        self.gridLayout_3 = QtWidgets.QGridLayout(self.groupBox_Parameters)
        self.gridLayout_3.setObjectName("gridLayout_3")
        self.parametersLoad = QtWidgets.QPushButton(self.groupBox_Parameters)
        self.parametersLoad.setObjectName("parametersLoad")
        self.gridLayout_3.addWidget(self.parametersLoad, 0, 0, 1, 1)
        self.parametersSave = QtWidgets.QPushButton(self.groupBox_Parameters)
        self.parametersSave.setObjectName("parametersSave")
        self.gridLayout_3.addWidget(self.parametersSave, 0, 1, 1, 1)
        self.verticalLayout.addWidget(self.groupBox_Parameters)
        self.groupBox_Mnemonics = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_Mnemonics.setObjectName("groupBox_Mnemonics")
        self.formLayout = QtWidgets.QFormLayout(self.groupBox_Mnemonics)
        self.formLayout.setObjectName("formLayout")
        self.label_Mnemonics = QtWidgets.QLabel(self.groupBox_Mnemonics)
        self.label_Mnemonics.setObjectName("label_Mnemonics")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.LabelRole, self.label_Mnemonics)
        self.lineEdit_Mnemonic = QtWidgets.QLineEdit(self.groupBox_Mnemonics)
        self.lineEdit_Mnemonic.setObjectName("lineEdit_Mnemonic")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.FieldRole, self.lineEdit_Mnemonic)
        self.label_Data = QtWidgets.QLabel(self.groupBox_Mnemonics)
        self.label_Data.setObjectName("label_Data")
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.LabelRole, self.label_Data)
        self.lineEdit_Data = QtWidgets.QLineEdit(self.groupBox_Mnemonics)
        self.lineEdit_Data.setObjectName("lineEdit_Data")
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.FieldRole, self.lineEdit_Data)
        self.mnemonicsRead = QtWidgets.QPushButton(self.groupBox_Mnemonics)
        self.mnemonicsRead.setObjectName("mnemonicsRead")
        self.formLayout.setWidget(2, QtWidgets.QFormLayout.LabelRole, self.mnemonicsRead)
        self.mnemonicsWrite = QtWidgets.QPushButton(self.groupBox_Mnemonics)
        self.mnemonicsWrite.setObjectName("mnemonicsWrite")
        self.formLayout.setWidget(2, QtWidgets.QFormLayout.FieldRole, self.mnemonicsWrite)
        self.verticalLayout.addWidget(self.groupBox_Mnemonics)
        self.groupBox_DAQ = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_DAQ.setObjectName("groupBox_DAQ")
        self.gridLayout_4 = QtWidgets.QGridLayout(self.groupBox_DAQ)
        self.gridLayout_4.setObjectName("gridLayout_4")
        self.daqStartDAQ = QtWidgets.QPushButton(self.groupBox_DAQ)
        self.daqStartDAQ.setObjectName("daqStartDAQ")
        self.gridLayout_4.addWidget(self.daqStartDAQ, 0, 0, 1, 1)
        self.daqStopDAQ = QtWidgets.QPushButton(self.groupBox_DAQ)
        self.daqStopDAQ.setObjectName("daqStopDAQ")
        self.gridLayout_4.addWidget(self.daqStopDAQ, 0, 1, 1, 1)
        self.daqConfigure = QtWidgets.QPushButton(self.groupBox_DAQ)
        self.daqConfigure.setEnabled(False)
        self.daqConfigure.setAutoDefault(False)
        self.daqConfigure.setDefault(False)
        self.daqConfigure.setFlat(False)
        self.daqConfigure.setObjectName("daqConfigure")
        self.gridLayout_4.addWidget(self.daqConfigure, 1, 0, 1, 2)
        self.verticalLayout.addWidget(self.groupBox_DAQ)
        self.groupBox_Logging = QtWidgets.QGroupBox(self.layoutWidget2)
        self.groupBox_Logging.setObjectName("groupBox_Logging")
        self.gridLayout_5 = QtWidgets.QGridLayout(self.groupBox_Logging)
        self.gridLayout_5.setObjectName("gridLayout_5")
        self.logging_StartLog = QtWidgets.QPushButton(self.groupBox_Logging)
        self.logging_StartLog.setCheckable(False)
        self.logging_StartLog.setObjectName("logging_StartLog")
        self.gridLayout_5.addWidget(self.logging_StartLog, 0, 0, 1, 1)
        self.logging_StopLog = QtWidgets.QPushButton(self.groupBox_Logging)
        self.logging_StopLog.setObjectName("logging_StopLog")
        self.gridLayout_5.addWidget(self.logging_StopLog, 0, 1, 1, 1)
        self.verticalLayout.addWidget(self.groupBox_Logging)
        self.Log = QtWidgets.QScrollArea(self.layoutWidget2)
        self.Log.setWidgetResizable(True)
        self.Log.setObjectName("Log")
        self.scrollAreaWidgetContents = QtWidgets.QWidget()
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, 177, 126))
        self.scrollAreaWidgetContents.setObjectName("scrollAreaWidgetContents")
        self.Log.setWidget(self.scrollAreaWidgetContents)
        self.verticalLayout.addWidget(self.Log)
        self.clearLog = QtWidgets.QPushButton(self.layoutWidget2)
        self.clearLog.setObjectName("clearLog")
        self.verticalLayout.addWidget(self.clearLog)
        self.Scope1 = PlotWidget(self.centralwidget)
        self.Scope1.setGeometry(QtCore.QRect(200, 10, 801, 311))
        self.Scope1.setObjectName("Scope1")
        self.Scope2 = PlotWidget(self.centralwidget)
        self.Scope2.setGeometry(QtCore.QRect(200, 340, 801, 311))
        self.Scope2.setObjectName("Scope2")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 1121, 21))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "DSP Control & DAQ"))
        self.Scope2_Channel0.setText(_translate("MainWindow", "Channel 0"))
        self.Scope2_Channel1.setText(_translate("MainWindow", "Channel 1"))
        self.Scope2_Channel2.setText(_translate("MainWindow", "Channel 2"))
        self.Scope2_Channel3.setText(_translate("MainWindow", "Channel 3"))
        self.Scope2_Channel4.setText(_translate("MainWindow", "Channel 4"))
        self.Scope2_Channel5.setText(_translate("MainWindow", "Channel 5"))
        self.Scope2_Channel6.setText(_translate("MainWindow", "Channel 6"))
        self.Scope2_Channel7.setText(_translate("MainWindow", "Channel 7"))
        self.scope2SelectAll.setText(_translate("MainWindow", "Select all"))
        self.scope2DeselectAll.setText(_translate("MainWindow", "Deselect all"))
        self.Scope1_Channel0.setText(_translate("MainWindow", "Channel 0"))
        self.Scope1_Channel1.setText(_translate("MainWindow", "Channel 1"))
        self.Scope1_Channel2.setText(_translate("MainWindow", "Channel 2"))
        self.Scope1_Channel3.setText(_translate("MainWindow", "Channel 3"))
        self.Scope1_Channel4.setText(_translate("MainWindow", "Channel 4"))
        self.Scope1_Channel5.setText(_translate("MainWindow", "Channel 5"))
        self.Scope1_Channel6.setText(_translate("MainWindow", "Channel 6"))
        self.Scope1_Channel7.setText(_translate("MainWindow", "Channel 7"))
        self.scope1SelectAll.setText(_translate("MainWindow", "Select all"))
        self.scope1DeselectAll.setText(_translate("MainWindow", "Deselect all"))
        self.groupBox_USB_Connection.setTitle(_translate("MainWindow", "USB Connection"))
        self.usbConnect.setText(_translate("MainWindow", "Connect"))
        self.usbDisconnect.setText(_translate("MainWindow", "Disconnect"))
        self.groupBox_Drive.setTitle(_translate("MainWindow", "Drive"))
        self.driveTurnOn.setText(_translate("MainWindow", "Turn On"))
        self.driveCheck.setText(_translate("MainWindow", "Check"))
        self.driveTurnOff.setText(_translate("MainWindow", "Turn Off"))
        self.driveReset.setText(_translate("MainWindow", "Reset"))
        self.groupBox_Parameters.setTitle(_translate("MainWindow", "Parameters"))
        self.parametersLoad.setText(_translate("MainWindow", "Load"))
        self.parametersSave.setText(_translate("MainWindow", "Save"))
        self.groupBox_Mnemonics.setTitle(_translate("MainWindow", "Mnemonics"))
        self.label_Mnemonics.setText(_translate("MainWindow", "Mnemonic"))
        self.label_Data.setText(_translate("MainWindow", "Data"))
        self.mnemonicsRead.setText(_translate("MainWindow", "Read"))
        self.mnemonicsWrite.setText(_translate("MainWindow", "Write"))
        self.groupBox_DAQ.setTitle(_translate("MainWindow", "DAQ"))
        self.daqStartDAQ.setText(_translate("MainWindow", "Start DAQ"))
        self.daqStopDAQ.setText(_translate("MainWindow", "Stop DAQ"))
        self.daqConfigure.setText(_translate("MainWindow", "Configure"))
        self.groupBox_Logging.setTitle(_translate("MainWindow", "Logging"))
        self.logging_StartLog.setText(_translate("MainWindow", "Start Log"))
        self.logging_StopLog.setText(_translate("MainWindow", "Stop Log"))
        self.clearLog.setText(_translate("MainWindow", "Clear"))

    def setupSignals(self, MainWindow):
        self.usbConnect.clicked.connect(self.connectCallback)
        self.usbDisconnect.clicked.connect(self.disconnectCallback)
        self.driveTurnOn.clicked.connect(self.turnOnCallback)
        self.driveTurnOff.clicked.connect(self.turnOffCallback)
        self.mnemonicsRead.clicked.connect(self.mnemonicReadCallback)
        self.mnemonicsWrite.clicked.connect(self.mnemonicWriteCallback)

    def initDll(self):
        self.tempuslib = cdll.LoadLibrary("x64/Debug/TempusDll.dll");
        #self.mainProcess = Process(target=self.tempuslib.USB_StartThread, args=(0,))

    def connectCallback(self):
        self.tempuslib.MakeThread()
        self.tempuslib.USB_Connect()
    
    def disconnectCallback(self):
        self.tempuslib.USB_Disconnect()

    def turnOnCallback(self):
        self.tempuslib.Drive_TurnOn()

    def turnOffCallback(self):
        self.tempuslib.Drive_TurnOff()

    def mnemonicReadCallback(self):
        code = c_char_p(self.lineEdit_Mnemonic.text().encode("ascii"))
        value = self.tempuslib.Mnemonic_Read(code)
        self.lineEdit_Data.setText(str(value))

    def mnemonicWriteCallback(self):
        code = c_char_p(self.lineEdit_Mnemonic.text().encode("ascii"))
        argument = c_ushort(int(self.lineEdit_Data.text()))
        self.tempuslib.Mnemonic_Write(code, argument)


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    ui.initDll()
    ui.setupSignals(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
